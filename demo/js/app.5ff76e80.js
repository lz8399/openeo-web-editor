webpackJsonp([1],{0:function(e,t,a){e.exports=a("NHnr")},"2Oim":function(e,t){},"35e1":function(e,t){},"4/hK":function(e,t){},"44ix":function(e,t){},"6GY2":function(e,t){},"6iet":function(e,t){},"7Otq":function(e,t,a){e.exports=a.p+"img/logo.637896da.png"},EHEs:function(e,t){},EYnv:function(e,t){},FfND:function(e,t){},Hbmy:function(e,t){},"Hw/t":function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("/5sW"),s={serverUrl:"http://localhost:8000/",allowServerChange:!0,defaultScript:'// Create the process graph\nOpenEO.Editor.ProcessGraph = OpenEO.ImageCollection.create(\'Sentinel2A-L1C\')\n\t.filter_daterange("2018-01-01","2018-01-31")\n\t.NDVI("B04","B08")\n\t.max_time();'},r=(a("VjuZ"),a("EuXz"),a("RbLt")),n=(a("uDYd"),a("Oy1H")),o=a.n(n),c=(a("U6qc"),{name:"DataTable",props:["id","columns","dataSource"],data:function(){return{data:[],view:[],filterValue:null,primaryKey:null,noDataMessage:"Loading data..."}},watch:{data:function(e,t){this.updateView()},filterValue:function(e,t){this.updateView()}},computed:{columnCount:function(){return Object.keys(this.columns).length},hasFilter:function(){return"string"===typeof this.filterValue&&this.filterValue.length>0}},created:function(){this.determinePrimaryKey()},methods:{determinePrimaryKey:function(){for(var e in this.columns)if(this.columns[e].primaryKey){this.primaryKey=e;break}},setNoData:function(e){if(this.data=[],"number"===typeof e)switch(e){case 401:this.noDataMessage="Please authenticate to use this feature.";break;case 403:case 404:this.noDataMessage="Sorry, authentication failed. Please try again.";break;case 501:this.noDataMessage="Sorry, this feature is not supported by the server.";break;default:this.noDataMessage="Sorry, an error occured. Please try again later.";break}else this.noDataMessage=e},retrieveData:function(){var e=this;this.data=[],"function"===typeof this.dataSource?this.dataSource().then(function(t){Array.isArray(t)&&t.length>0?e.data=t:e.setNoData("Sorry, no data found.")}).catch(function(t){e.setNoData(t)}):Array.isArray(this.dataSource)&&this.dataSource.length>0?this.data=this.dataSource:this.setNoData("Sorry, no data available.")},removeData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");this.data=this.data.filter(function(a){return a[t.primaryKey]!=e})},addData:function(e){if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");this.data.push(e)},replaceData:function(e){var t=this;if(null===this.primaryKey)throw new Error("No primary key specified.");if(!e.hasOwnProperty(this.primaryKey))throw new Error("Object does not contain a value for the primary key.");var a=this.data.findIndex(function(a){a[t.primaryKey],e[t.primaryKey]});a>=0?this.data[a]=e:this.data.push(e)},value:function(e,t,a){return"object"===o()(e)?e[a]:"$"===a?e:null},formattedValue:function(e,t,a){return this.format(this.value(e,t,a),t)},sort:function(){},filter:function(){var e=this;if(this.hasFilter){var t=this.filterValue.toLowerCase();this.view=this.view.filter(function(a){for(var i in a){var s=e.columns[i];if("undefined"===typeof s||!s.hasOwnProperty("filterable")||!1!==s.filterable){var r=e.value(a,s,i);if(("number"===typeof r||"string"===typeof r||"boolean"===typeof r)&&(r=r.toString(),-1!==r.toLowerCase().indexOf(t)))return!0}}return!1})}},clearFilter:function(){this.filterValue="",this.updateView()},updateView:function(){Array.isArray(this.data)?(this.view=this.data,this.data.length>0&&(this.filter(),this.sort())):this.view=[]},format:function(e,t){return"string"===typeof t.format?"function"===typeof this["format"+t.format]?e=this["format"+t.format](e,t):console.log(t.format+" is an invalid formatter."):"function"===typeof t.format&&(e=t.format.call(this,e,t)),e},formatFileSize:function(e,t){if(!e)return"";var a=0==e?0:Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,a)).toFixed(2)+" "+["B","kB","MB","GB","TB"][a]},formatDateTime:function(e,t){if(!e)return"";var a=new Date(e);return a.toISOString().replace("T"," ").replace("Z","").substring(0,19)}}}),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dataTable",attrs:{id:e.id}},[a("div",{staticClass:"dataTableMenu"},[a("div",{staticClass:"dataTableToolbar"},[e._t("toolbar")],2),e.data.length>0?a("div",{staticClass:"dataTableFilter"},[a("i",{staticClass:"fas fa-search filter-icon"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.filterValue,expression:"filterValue"}],attrs:{type:"text",placeholder:"Search term"},domProps:{value:e.filterValue},on:{input:function(t){t.target.composing||(e.filterValue=t.target.value)}}}),a("button",{attrs:{disabled:!e.hasFilter},on:{click:e.clearFilter}},[a("i",{staticClass:"fas fa-times-circle"})])]):e._e()]),e.data.length>0?a("table",[a("tr",e._l(e.columns,function(t,i){return a("th",{key:i,class:i},[e._v(e._s(t.name))])})),e._l(e.view,function(t,i){return a("tr",{key:i},e._l(e.columns,function(i,s){return a("td",{key:s,class:s,attrs:{"data-value":!!i.stylable&&e.value(t,i,s)}},[e._t(s,[e._v("\n\t\t\t\t\t"+e._s(e.formattedValue(t,i,s))+"\n\t\t\t\t")],{row:t,col:i,id:s})],2)}))}),e.data.length>0&&0==e.view.length?a("tr",{staticClass:"noSearchResults"},[a("td",{attrs:{colspan:e.columnCount}},[e._v("Sorry, no element matches your search criteria.")])]):e._e()],2):e._e(),0==e.data.length?a("div",{staticClass:"noDataMessage"},[e._v(e._s(e.noDataMessage))]):e._e()])},u=[],p=a("XyMi");function d(e){a("35e1")}var h=!1,f=d,v=null,m=null,b=Object(p["a"])(c,l,u,h,f,v,m),_=b.exports,w={name:"FilePanel",props:["openEO","userId"],components:{DataTable:_},data:function(){return{credits:null}},created:function(){r["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},computed:{userName:{get:function(){return"string"!==typeof this.userId&&"number"!==typeof this.userId||"me"==this.userId?"Guest":this.userId}}},methods:{updateData:function(){var e=this;if(this.credits=null,("string"===typeof this.userId||"number"===typeof this.userId)&&this.openEO.Capabilities.userCredits()){var t=this.openEO.Users.getObject(this.userId);t.getCredits().then(function(t){e.credits=t}).catch(function(t){e.credits=null})}},topUpCredits:function(){this.$utils.error(this,"Not implemented!")}}},O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"filePanel"}},[a("h3",[e._v("User '"+e._s(e.userName)+"'")]),a("br"),a("ul",[e.openEO.Capabilities.userCredits()?a("li",[e._v("Credits: "+e._s(null===e.credits?"N/A":e.credits)+" "),null!==e.credits?a("button",{attrs:{id:"topUpCredits"},on:{click:e.topUpCredits}},[e._v("Top up")]):e._e()]):e._e()])])},g=[],E=!1,C=null,y=null,S=null,D=Object(p["a"])(w,O,g,E,C,y,S),I=D.exports,$={name:"BackendPanel",props:["openEO"],data:function(){return{processes:[],data:[],serverUrls:[]}},watch:{serverUrls:function(e,t){localStorage.setItem("serverUrls",JSON.stringify(e))}},created:function(){r["a"].$on("changeServerUrl",this.changeServer),r["a"].$on("serverChanged",this.discoverData)},mounted:function(){var e=localStorage.getItem("serverUrls");null!==e&&(this.serverUrls=JSON.parse(e))},methods:{showDataSelector:function(){return this.openEO.Capabilities.data()&&this.data.length>0},showProcessSelector:function(){return this.openEO.Capabilities.processes()&&this.processes.length>0},showServerSelector:function(){var e=this;r["a"].$emit("showComponentModal","Select previously used server","List",{items:this.serverUrls,actions:[{callback:function(t){return e.updateServerUrlTo(t)||!0},icon:"check",title:"Select this server"},{callback:function(t){return e.serverUrls.splice(e.serverUrls.indexOf(t),1)},icon:"trash",title:"Delete entry from history"}]})},changeServer:function(e){this.$refs.serverUrl.value=e,-1===this.serverUrls.indexOf(e)&&this.serverUrls.push(e)},discoverData:function(){var e=this;this.openEO.Capabilities.data()&&this.openEO.Data.get().then(this.setDiscoveredData).catch(function(t){return e.setDiscoveredData([])}),this.openEO.Capabilities.processes()&&this.openEO.Processes.get().then(this.setDiscoveredProcesses).catch(function(t){return e.setDiscoveredProcesses([])})},updateServerUrlFromInput:function(){var e=this.$refs.serverUrl.value;"string"===typeof e&&e!=this.openEO.API.baseUrl&&r["a"].$emit("changeServerUrl",e)},updateServerUrlTo:function(e){this.$refs.serverUrl.value=e,this.updateServerUrlFromInput()},getServerInfo:function(){var e={url:this.openEO.API.baseUrl,supportedEndpoints:this.openEO.Capabilities.rawData,supportedWebServices:this.openEO.SupportedServices,supportedOutputFormats:this.openEO.SupportedOutputFormats};r["a"].$emit("showModal","Server information",e)},showDataInfo:function(){var e=this;this.openEO.Data.getById(this.$refs.data.value).then(function(t){r["a"].$emit("showModal","Data: "+e.$refs.data.value,t)}).catch(function(t){return e.$utils.error(e,"Sorry, can't load process details.")})},showProcessInfo:function(){var e=this;this.openEO.Processes.getById(this.$refs.processes.value).then(function(t){r["a"].$emit("showModal","Process: "+e.$refs.processes.value,t)}).catch(function(t){return e.$utils.error(e,"Sorry, can't load process details.")})},insertDataToEditor:function(){this.insertToEditor(this.$refs.data.value)},insertProcessToEditor:function(){this.insertToEditor(this.$refs.processes.value)},insertToEditor:function(e){r["a"].$emit("addToSource",e)},setDiscoveredData:function(e){for(var t in this.data=[],e)"undefined"!==typeof e[t].product_id&&this.data.push(e[t])},setDiscoveredProcesses:function(e){for(var t in this.processes=[],e)"undefined"!==typeof e[t].process_id&&this.processes.push(e[t])},insertVisualization:function(){var e,t=document.getElementById("visualizations");if("custom"===t.value)e="\nOpenEO.Editor.Visualization = {\n\tfunction: function(input) {\n\t\t// ToDo: Implement your custom visualization\n\t}\n};\n";else if("undefined"!==typeof this.openEO.Visualizations[t.value]){var a="",i=[];for(var s in this.openEO.Visualizations[t.value].arguments){var r=this.openEO.Visualizations[t.value].arguments[s],n=prompt(r.description,JSON.stringify(r.defaultValue));if(null===n)return;i.push('"'+s+'": '+n)}i.length>0&&(a=",\n\targs: {\n\t\t"+i.join(",\r\n\t\t")+"\n\t}"),e="\nOpenEO.Editor.Visualization = {\n\tfunction: OpenEO.Visualizations."+t.value+a+"\n};\n"}else e="";this.insertToEditor(e)}}},T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"backendPanel"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.$config.allowServerChange,expression:"$config.allowServerChange"}],staticClass:"server-toolbar"},[a("h3",[e._v("Server:")]),a("input",{ref:"serverUrl",attrs:{id:"serverUrl",list:"serverUrls",value:""}}),a("button",{attrs:{title:"Select previously used server"},on:{click:e.showServerSelector}},[a("i",{staticClass:"fas fa-book"})]),a("button",{attrs:{title:"Change server"},on:{click:e.updateServerUrlFromInput}},[a("i",{staticClass:"fas fa-check"})])]),a("div",{staticClass:"info-toolbar"},[a("button",{attrs:{title:"Get server information"},on:{click:e.getServerInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showDataSelector(),expression:"showDataSelector()"}],staticClass:"data-toolbar"},[e._v("\n\t\tData: "),a("select",{ref:"data",attrs:{id:"data"}},e._l(e.data,function(t){return a("option",{key:t.product_id,attrs:{title:t.description},domProps:{value:t.product_id}},[e._v(e._s(t.product_id))])})),a("button",{attrs:{id:"insertData",title:"Insert into script"},on:{click:e.insertDataToEditor}},[a("i",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.dataInfo(),expression:"openEO.Capabilities.dataInfo()"}],attrs:{title:"Show details"},on:{click:e.showDataInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showProcessSelector(),expression:"showProcessSelector()"}],staticClass:"processes-toolbar"},[e._v("\n\t\tProcesses: "),a("select",{ref:"processes",attrs:{id:"processes"}},e._l(e.processes,function(t){return a("option",{key:t.process_id,attrs:{title:t.description},domProps:{value:t.process_id}},[e._v(e._s(t.process_id))])})),a("button",{attrs:{id:"insertProcesses",title:"Insert into script"},on:{click:e.insertProcessToEditor}},[a("i",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.processInfo(),expression:"openEO.Capabilities.processInfo()"}],attrs:{title:"Show details"},on:{click:e.showProcessInfo}},[a("i",{staticClass:"fas fa-info"})])]),a("div",{staticClass:"vis-toolbar"},[e._v("\n\t\tVisualizations: "),a("select",{attrs:{id:"visualizations"}},[a("option",{attrs:{value:""}},[e._v("None")]),a("option",{attrs:{value:"custom"}},[e._v("Custom function")]),a("optgroup",{attrs:{label:"Pre-defined"}},e._l(e.openEO.Visualizations,function(t,i){return a("option",{key:i,domProps:{value:i}},[e._v(e._s(t.name))])}))]),a("button",{attrs:{id:"insertVisualizations",title:"Insert into script"},on:{click:e.insertVisualization}},[a("i",{staticClass:"fas fa-plus"})])])])},P=[];function k(e){a("R+pp")}var M=!1,x=k,j="data-v-c8b9cb2e",V=null,U=Object(p["a"])($,T,P,M,x,j,V),N=U.exports,A=(a("mJx5"),{name:"ObjectTree",props:["data"],data:function(){return{collapsed:!1,isObjectTree:!0}},created:function(){this.collapsed=Array.isArray(this.data)&&this.data.length>50&&this.$parent.isObjectTree},computed:{shouldShowKey:function(){return!(Array.isArray(this.data)&&this.data.length>0&&"object"!==o()(this.data[0]))},isEmpty:function(){return null==this.data||Array.isArray(this.data)&&0==this.data.length||"object"==o()(this.data)&&0==Object.keys(this.data).length}},methods:{toggle:function(){this.collapsed=!this.collapsed},showObjectTree:function(e){return"object"===o()(e)&&!this.collapsed},prettifyKey:function(e){return this.$utils.isNumeric(e)?e:e.split(/_|(?=[A-Z])/).map(function(e){return e.length<=2?e:e.charAt(0).toUpperCase()+e.substr(1)}).join(" ")}}}),L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isEmpty?a("em",[e._v("None")]):e.collapsed?a("em",[e._v("... ("),a("a",{on:{click:function(t){e.toggle()}}},[e._v("show all "+e._s(e.data.length)+" entries")]),e._v(")")]):a("ul",e._l(e.data,function(t,i){return a("li",{key:i},[e.shouldShowKey?[a("em",[e._v(e._s(e.prettifyKey(i)))]),e._v(": ")]:e._e(),e.showObjectTree(t)?a("ObjectTree",{attrs:{data:t}}):[e._v(e._s(t))]],2)}))},F=[],J=!1,B=null,z=null,G=null,R=Object(p["a"])(A,L,F,J,B,z,G),K=R.exports,W={name:"DataViewer",components:{ObjectTree:K},data:function(){return{content:null}},mounted:function(){this.reset()},methods:{isText:function(){return"string"===typeof this.content},reset:function(){this.content="Nothing to show."},showJson:function(e){this.content=e,r["a"].$emit("showDataViewer")},showText:function(e){this.content=e,r["a"].$emit("showDataViewer")},showBlob:function(e){var t=this;switch(e.type){case"application/json":this.blobToText(e,function(e){var a=JSON.parse(e.target.result);t.showJson(a)});break;case"text/plain":this.blobToText(e,function(e){t.showText(e.target.result)});break}},nl2br:function(e){return"undefined"===typeof e||null===e?"":(e+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br>$2")},blobToText:function(e,t){var a=new FileReader;a.onload=t,a.readAsText(e)}}},q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dataViewer"}},[e.isText()?a("span",[e._v(e._s(e.nl2br(e.content)))]):a("ObjectTree",{attrs:{data:e.content}})],1)},H=[];function Y(e){a("EHEs")}var Z=!1,X=Y,Q="data-v-c97bdf14",ee=null,te=Object(p["a"])(W,q,H,Z,X,Q,ee),ae=te.exports,ie={name:"FilePanel",props:["openEO","userId"],components:{DataTable:_},data:function(){return{columns:{name:{name:"Path / Name",primaryKey:!0},size:{name:"Size",format:"FileSize",filterable:!1},modified:{name:"Last modified",format:"DateTime"},actions:{name:"Actions",filterable:!1,id:"name"}}}},created:function(){r["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getFiles()},updateData:function(){this.$refs.table&&this.openEO.Capabilities.userFiles()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},uploadFile:function(){var e=this,t=document.getElementById("uploadUserFile"),a=document.getElementById("uploadUserFileStatus"),i=t.files[0],s=this.openEO.Users.getObject(this.userId).getFileObject(i.name);s.replace(i,function(e){a.innerText=e+"%"}).then(function(s){e.$refs.table.replaceData({name:i.name,size:i.size,modified:(new Date).toISOString()}),a.innerText="",t.value="",e.$utils.ok(e,"File upload completed.")}).catch(function(t){a.innerText="",e.$utils.error(e,"Sorry, file upload failed.")})},downloadFile:function(e){var t=this;this.$utils.info(this,"Download requested. Please wait...");var a=this.openEO.Users.getObject(this.userId).getFileObject(e);a.get().then(function(a){t.$utils.downloadData(a,e)})},deleteFile:function(e){var t=this,a=this.openEO.Users.getObject(this.userId).getFileObject(e);a.delete().then(function(a){t.$refs.table.removeData(e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete file.")})}}},se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"FilePanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.uploadUserFile(),expression:"openEO.Capabilities.uploadUserFile()"}]},[a("input",{attrs:{type:"file",name:"uploadUserFile",id:"uploadUserFile"}}),a("button",{attrs:{title:"Add new file",id:"uploadUserFileBtn"},on:{click:function(t){e.uploadFile()}}},[a("i",{staticClass:"fas fa-upload"})]),a("span",{attrs:{id:"uploadUserFileStatus"}})]),a("button",{attrs:{title:"Refresh files"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadUserFile(),expression:"openEO.Capabilities.downloadUserFile()"}],attrs:{title:"Download"},on:{click:function(a){e.downloadFile(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-download"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteUserFile(),expression:"openEO.Capabilities.deleteUserFile()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteFile(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},re=[];function ne(e){a("ioAF")}var oe=!1,ce=ne,le=null,ue=null,pe=Object(p["a"])(ie,se,re,oe,ce,le,ue),de=pe.exports,he={name:"ImageViewer",data:function(){return{script:null,visibleContent:"text"}},mounted:function(){this.reset()},methods:{setScript:function(e){this.script=e},reset:function(){this.setMessage("Nothing to show.")},setMessage:function(e){this.$refs.emptyMsg.innerText=e,this.visibleContent="text",this.setCanvasSize(0,0)},showImage:function(e){var t=this;this.setMessage("Loading image..."),r["a"].$emit("showImageViewer"),this.$refs.image.onload=function(){t.visibleContent="image",t.script.Visualization&&t.script.Visualization.function&&t.updateCanvas()},this.$refs.image.src=e},showImageBlob:function(e){this.showImage(URL.createObjectURL(e))},showImageBase64:function(e){contentType,btoa(e);this.showImage(e)},updateCanvas:function(){this.setCanvasSize(this.$refs.image.naturalWidth,this.$refs.image.naturalHeight);var e=this.$refs.canvas.getContext("2d");e.drawImage(this.$refs.image,0,0),this.$refs.canvas.originalImage=e.getImageData(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.$utils.recolorImage(this.$refs.canvas,this.script),this.visibleContent="canvas"},setCanvasSize:function(e,t){this.$refs.canvas.width=this.$refs.image.naturalWidth,this.$refs.canvas.height=this.$refs.image.naturalHeight}}},fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"imageContainer",attrs:{id:"imageViewer"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"text"==e.visibleContent,expression:"visibleContent == 'text'"}],ref:"emptyMsg"}),a("canvas",{directives:[{name:"show",rawName:"v-show",value:"canvas"==e.visibleContent,expression:"visibleContent == 'canvas'"}],ref:"canvas"}),a("img",{directives:[{name:"show",rawName:"v-show",value:"image"==e.visibleContent,expression:"visibleContent == 'image'"}],ref:"image"})])},ve=[];function me(e){a("qWbh")}var be=!1,_e=me,we=null,Oe=null,ge=Object(p["a"])(he,fe,ve,be,_e,we,Oe),Ee=ge.exports,Ce={name:"JobPanel",props:["openEO","userId"],components:{DataTable:_},data:function(){return{columns:{job_id:{name:"ID",primaryKey:!0},status:{name:"Status",stylable:!0},submitted:{name:"Submitted",format:"DateTime"},updated:{name:"Last update",format:"DateTime"},consumed_credits:{name:"Costs",filterable:!1},actions:{name:"Actions",filterable:!1,id:"job_id"}}}},created:function(){r["a"].$on("jobCreated",this.jobCreated),r["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getJobs()},updateData:function(){this.$refs.table&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.openEO.Capabilities.userJobs()?this.$refs.table.retrieveData():this.$refs.table.setNoData(this.openEO.Capabilities.createJob()?"":501))},jobCreated:function(e){var t=this;this.$refs.table.addData(e);var a={buttons:[]};this.openEO.Capabilities.downloadJob()&&(a.buttons.push({text:"Download",action:function(){return t.downloadJob(e.job_id)}}),a.timeout=1e4),this.$snotify.confirm("Job created!",null,a)},createJob:function(e,t){var a=this;this.openEO.Jobs.create(e.ProcessGraph,t).then(function(e){r["a"].$emit("jobCreated",e)}).catch(function(e){a.$utils.error(a,"Sorry, could not create an OpenEO job.")})},createJobFromScript:function(e){var t=this,a={},i=prompt("Please specify the file format you need or leave empty for default format.","");null!==i&&(i.length>0&&(a={format:i}),r["a"].$emit("evalScript",function(e){t.createJob(e,a)}))},showJobInfo:function(e){var t=this,a=this.openEO.Jobs.getObject(e);a.get().then(function(t){r["a"].$emit("showModal","Job: "+e,t)}).catch(function(e){return t.$utils.error(t,"Sorry, could not load job details.")})},editJob:function(e){var t=this;r["a"].$emit("evalScript",function(a){var i=t.openEO.Jobs.getObject(e);i.modify(a.ProcessGraph,{})},!1)},queueJob:function(e){try{var t=this.openEO.Jobs.getObject(e);t.queue()}catch(e){this.$utils.error(this,e.message)}},pauseJob:function(e){try{var t=this.openEO.Jobs.getObject(e);t.pause()}catch(e){this.$utils.error(this,e.message)}},cancelJob:function(e){try{var t=this.openEO.Jobs.getObject(e);t.cancel()}catch(e){this.$utils.error(this,e.message)}},downloadJob:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=prompt("Please specify the file format you need or leave empty for default format.","");if(null!==i){this.$utils.info(this,(a?"Data":"Download")+" requested. Please wait...");var s=this.openEO.Jobs.getObject(e);s.download(i).then(function(s){if(a)r["a"].$emit("evalScript",function(e){r["a"].$emit("showInViewer",s,e,{format:i})});else{var n="";i&&(n="."+i),t.$utils.downloadData(s,e+n)}}).catch(function(e){t.$utils.error(t,"Sorry, an error occured.")})}},createServiceFromJob:function(e){var t=this;if(1==this.openEO.SupportedServices.length)a=this.openEO.SupportedServices[0];else{var a=prompt("Please specify the service type you want to create:","");if(null===a)return;-1===this.openEO.SupportedServices.indexOf(a.toLowerCase())&&this.$utils.error(this,"Invalid service type specified.")}this.openEO.Services.create(e,a,{}).then(function(e){r["a"].$emit("serviceCreated",e)}).catch(function(e){t.$utils.error(t,"Sorry, an error occured.")})}}},ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"JobPanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createJob(),expression:"openEO.Capabilities.createJob()"}],attrs:{title:"Add new job"},on:{click:e.createJobFromScript}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.userJobs(),expression:"openEO.Capabilities.userJobs()"}],attrs:{title:"Refresh jobs"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.jobInfo(),expression:"openEO.Capabilities.jobInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.showJobInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateJob(),expression:"openEO.Capabilities.updateJob()"}],attrs:{title:"Edit"},on:{click:function(a){e.editJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.queueJob(),expression:"openEO.Capabilities.queueJob()"}],attrs:{title:"Queue as batch job"},on:{click:function(a){e.queueJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-play-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.pauseJob(),expression:"openEO.Capabilities.pauseJob()"}],attrs:{title:"Pause batch job"},on:{click:function(a){e.pauseJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-pause-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.cancelJob(),expression:"openEO.Capabilities.cancelJob()"}],attrs:{title:"Disable"},on:{click:function(a){e.cancelJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-stop-circle"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadJob(),expression:"openEO.Capabilities.downloadJob()"}],attrs:{title:"Download"},on:{click:function(a){e.downloadJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-download"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.downloadJob(),expression:"openEO.Capabilities.downloadJob()"}],attrs:{title:"View results"},on:{click:function(a){e.downloadJob(t.row[t.col.id],!0)}}},[a("i",{staticClass:"fas fa-eye"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createService(),expression:"openEO.Capabilities.createService()"}],attrs:{title:"Create Service"},on:{click:function(a){e.createServiceFromJob(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-plus"}),a("i",{staticClass:"fas fa-cloud"})])]}}])})},Se=[];function De(e){a("cq1b")}var Ie=!1,$e=De,Te=null,Pe=null,ke=Object(p["a"])(Ce,ye,Se,Ie,$e,Te,Pe),Me=ke.exports,xe=(a("EYnv"),a("nrd6")),je=a.n(xe),Ve=a("Inhi"),Ue=a.n(Ve);Ue.a.LeafletGeotiff.CustomRenderer=Ue.a.LeafletGeotiffRenderer.extend({options:{script:null},initialize:function(e){this.name="openEO-geotiff-visualizer",Ue.a.setOptions(this,e)},setScript:function(e){e&&e.Visualization&&e.Visualization.function&&(this.options.script=e),this.parent._reset()},render:function(e,t,a,i){for(var s=!!(this.options.script&&this.options.script.Visualization&&this.options.script.Visualization.function),r=a.createImageData(e.width,e.height),n=0;n<e.height;n++)for(var o=0;o<e.width;o++){var c=n*e.width+o,l=[e.data[c],e.data[c],e.data[c],255];s&&(l=this.options.script.Visualization.function(l,this.options.script.Visualization.args)),r.data.set(l,4*(n*e.width+o))}a.putImageData(this.parent.transform(r,i),i.xStart,i.yStart)}});var Ne=Ue.a.LeafletGeotiff.customRenderer=function(e){return new Ue.a.LeafletGeotiff.CustomRenderer(e)},Ae=(a("pVLf"),a("ro2F"),a("FfND"),a("kD+0"),{name:"MapViewer",data:function(){return{options:{fullscreenControl:!0,center:[45,15],zoom:8},map:null,baseLayer:{osm:null},layer:{wms:null,tiff:null},layerControl:null}},mounted:function(){this.createMap(),r["a"].$on("viewWebService",this.viewWebService)},methods:{createMap:function(){this.map=new je.a.Map("mapCanvas",this.options),this.layerControl=je.a.control.layers.tree({}),this.layerControl.addTo(this.map),this.layerControl.expandTree(),this.map.on("layeradd",this.updateLayerTree),this.map.on("layerremove",this.updateLayerTree),this.baseLayer.osm=je.a.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{name:"OpenStreetMap",attribution:'Map data &copy; <a href="http://www.osm.org">OpenStreetMap</a>'}),this.baseLayer.osm.addTo(this.map)},updateLayerTree:function(){var e={label:"Base Layer",children:[]};for(var t in this.baseLayer)e.children.push({label:this.baseLayer[t].options.name,layer:this.baseLayer[t]});var a={label:"Data Layers",children:[]};for(var t in this.layer)null!==this.layer[t]&&a.children.push({label:this.layer[t].options.name,layer:this.layer[t]});var i=[e];a.children.length>0&&i.push(a),this.layerControl.setBaseTree(i)},viewWebService:function(e){"wms"==e.service_type.toLowerCase()?this.updateWMSLayer(e):this.$utils.error("Sorry, the requested service type is not supported by the map.")},removeOldLayer:function(e){for(var t in this.layer)null!==this.layer[t]&&this.layer[t]!==e&&(this.map.removeLayer(this.layer[t]),this.layer[t]=null)},updateTiffLayerBlob:function(e){this.updateTiffLayer(URL.createObjectURL(e))},updateTiffLayer:function(e){if(this.removeOldLayer(this.layer.tiff),this.layer.tiff)this.layer.tiff.setURL(e);else{var t=Ne(),a={name:"GeoTiff",renderer:t};this.layer.tiff=Object(Ve["leafletGeotiff"])(e,a),this.layer.tiff.addTo(this.map),r["a"].$emit("evalScript",function(e){t.setScript(e)})}},updateWMSLayer:function(e){this.removeOldLayer(this.layer.wms),this.layer.wms?(this.layer.wms.setUrl(e.service_url,!1),this.layer.wms.recolor()):this.createWMSLayer(e)},createWMSLayer:function(e){var t=this;this.layer.wms=je.a.tileLayer.wms(e.service_url,{name:"WMS",request:"GetCoverage",service:"WMS",coverage:"CUSTOM",format:"image/jpeg",tileSize:256,minZoom:8}),this.layer.wms.recolor=function(){for(var e in this._tiles){var a=this._tiles[e];t.recolor(a.el)}},this.layer.wms.createTile=function(e){var a=je.a.DomUtil.create("canvas","leaflet-tile");a.width=a.height=this.options.tileSize;var i=new Image;return i.crossOrigin="",i.onload=function(){var e=a.getContext("2d");e.drawImage(i,0,0),a.originalImage=e.getImageData(0,0,a.width,a.height),t.recolor(a)},i.src=this.getTileUrl(e),a},this.layer.wms.addTo(this.map)},recolor:function(e){var t=this;r["a"].$emit("evalScript",function(a){t.$utils.recolorImage(e,a)})}}}),Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mapCanvas"}})},Fe=[];function Je(e){a("2Oim")}var Be=!1,ze=Je,Ge="data-v-fa102c38",Re=null,Ke=Object(p["a"])(Ae,Le,Fe,Be,ze,Ge,Re),We=Ke.exports,qe={name:"List",props:["items","actions"],methods:{doAction:function(e,t){var a=e(t);!0===a&&this.$parent&&"Modal"==this.$parent.$options.name&&this.$parent.close()},doMainAction:function(e){this.actions.length>0&&this.doAction(this.actions[0].callback,e)}}},He=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",e._l(e.items,function(t){return a("li",{key:t},[a("a",{on:{click:function(a){e.doMainAction(t)}}},[e._v(e._s(t))]),e._l(e.actions,function(i){return a("button",{key:i.icon,attrs:{title:i.title},on:{click:function(a){e.doAction(i.callback,t)}}},[a("i",{class:"fas fa-"+i.icon})])})],2)}))},Ye=[];function Ze(e){a("44ix")}var Xe=!1,Qe=Ze,et="data-v-1c4504b4",tt=null,at=Object(p["a"])(qe,He,Ye,Xe,Qe,et,tt),it=at.exports,st={name:"Modal",components:{ObjectTree:K,List:it},data:function(){return{title:"",body:null,props:null,compname:null,shown:!1}},mounted:function(){r["a"].$on("showModal",this.showModal),r["a"].$on("showComponentModal",this.showComponentModal)},methods:{show:function(){this.shown=!0},close:function(){this.shown=!1},possiblyClose:function(e){e.target==document.getElementById("modal")&&this.close()},initCommonModal:function(e){this.title=e},initTextModal:function(e,t){this.initCommonModal(e),this.body=t,this.compname=null,this.props=null},initComponentModal:function(e,t,a){this.initCommonModal(e),this.body=null,this.compname=t,this.props=a},showModal:function(e,t){"string"===typeof t?(this.initTextModal(e,body),this.show()):this.showComponentModal(e,"ObjectTree",{data:t})},showComponentModal:function(e,t,a){this.initComponentModal(e,t,a),this.show()}}},rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.shown?a("div",{staticClass:"modal",attrs:{id:"modal"},on:{click:e.possiblyClose}},[a("div",{staticClass:"modal-container"},[a("h2",{staticClass:"modal-header"},[e._v("\n\t\t\t"+e._s(e.title)+"\n\t\t\t"),a("span",{staticClass:"close",on:{click:e.close}},[e._v("×")])]),a("div",{staticClass:"modal-content",attrs:{id:"modal-content"}},["string"===typeof e.body?[e._v(e._s(e.body))]:a(e.compname,e._b({tag:"component"},"component",e.props,!1))],2)])]):e._e()},nt=[];function ot(e){a("bbuP")}var ct=!1,lt=ot,ut=null,pt=null,dt=Object(p["a"])(st,rt,nt,ct,lt,ut,pt),ht=dt.exports,ft={name:"ProcessGraphPanel",props:["openEO","userId"],components:{DataTable:_},data:function(){return{columns:{$:{name:"ID",primaryKey:!0},actions:{name:"Actions",id:"$",filterable:!1}}}},created:function(){r["a"].$on("serverChanged",this.updateData)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getProcessGraphs()},updateData:function(){this.$refs.table&&this.openEO.Capabilities.userProcessGraphs()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},addGraph:function(){var e=this;r["a"].$emit("evalScript",function(t){var a=e.openEO.Users.getObject(e.userId);a.createProcessGraph(t.ProcessGraph)})},graphInfo:function(e){try{var t=this.openEO.Users.getObject(this.userId).getProcessGraphObject(e);t.get()}catch(e){this.$utils.error(this,e.message)}},editGraph:function(e){var t=this;r["a"].$emit("evalScript",function(a){var i=t.openEO.Users.getObject(t.userId).getProcessGraphObject(e);i.replace(a.ProcessGraph)})},deleteGraph:function(e){var t=this;try{var a=this.openEO.Users.getObject(this.userId).getProcessGraphObject(e);a.delete().then(function(a){t.$refs.table.removeData(e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete process graph.")})}catch(e){this.$utils.error(this,e.message)}}}},vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"ProcessGraphPanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.createUserProcessGraph(),expression:"openEO.Capabilities.createUserProcessGraph()"}],attrs:{title:"Add new process graph"},on:{click:e.addGraph}},[a("i",{staticClass:"fas fa-plus"}),e._v(" Add")]),a("button",{attrs:{title:"Refresh process graphs"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.userProcessGraphInfo(),expression:"openEO.Capabilities.userProcessGraphInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.graphInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateUserProcessGraph(),expression:"openEO.Capabilities.updateUserProcessGraph()"}],attrs:{title:"Edit"},on:{click:function(a){e.editGraph(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteUserProcessGraph(),expression:"openEO.Capabilities.deleteUserProcessGraph()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteGraph(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},mt=[];function bt(e){a("6GY2")}var _t=!1,wt=bt,Ot=null,gt=null,Et=Object(p["a"])(ft,vt,mt,_t,wt,Ot,gt),Ct=Et.exports,yt={name:"ServicePanel",props:["openEO","userId"],components:{DataTable:_},data:function(){return{columns:{service_id:{name:"ID",primaryKey:!0},service_type:{name:"Type"},job_id:{name:"Job"},actions:{name:"Actions",filterable:!1,id:"service_id"}}}},created:function(){r["a"].$on("serverChanged",this.updateData),r["a"].$on("serviceCreated",this.serviceCreated)},watch:{userId:function(e,t){null!==e&&this.updateData()}},methods:{dataSource:function(){var e=this.openEO.Users.getObject(this.userId);return e.getServices()},updateData:function(){this.$refs.table&&this.openEO.Capabilities.createService()&&("string"!==typeof this.userId&&"number"!==typeof this.userId?this.$refs.table.setNoData(401):this.$refs.table.retrieveData())},serviceCreated:function(e){var t=this;this.$refs.table.addData(e);var a={timeout:1e4,buttons:[]};a.buttons.push({text:"View",action:function(){return t.viewService(e)}}),this.openEO.Capabilities.serviceInfo()&&a.buttons.push({text:"Details",action:function(){return t.serviceInfo(e.job_id)}}),this.openEO.Capabilities.updateService()&&a.buttons.push({text:"Edit",action:function(){return t.editService(e.job_id)}}),this.openEO.Capabilities.deleteService()&&a.buttons.push({text:"Delete",action:function(){return t.deleteService(e.job_id)}}),this.$snotify.confirm("Service created!",null,a)},serviceInfo:function(e){var t=this;try{var a=this.openEO.Services.getObject(e);a.get().then(function(e){t.$utils.error(t,"Not implemented")}).catch(function(e){t.$utils.error(t,"Not implemented")})}catch(e){this.$utils.error(this,e.message)}},editService:function(e){var t=this;try{var a=this.openEO.Services.getObject(e);a.modify(null,null,{}).then(function(e){t.$utils.error(t,"Not implemented")}).catch(function(e){t.$utils.error(t,"Not implemented")})}catch(e){this.$utils.error(this,e.message)}},deleteService:function(e){var t=this;try{var a=this.openEO.Services.getObject(e);a.delete().then(function(a){t.$refs.table.removeData(e)}).catch(function(e){t.$utils.error(t,"Sorry, could not delete service.")})}catch(e){this.$utils.error(this,e.message)}},viewService:function(e){this.$utils.info(this,"Requesting tiles from server. Please wait..."),r["a"].$emit("viewWebService",e),r["a"].$emit("showMapViewer")}}},St=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("DataTable",{ref:"table",attrs:{dataSource:e.dataSource,columns:e.columns,id:"ServicePanel"},scopedSlots:e._u([{key:"toolbar",fn:function(t){return[a("button",{attrs:{title:"Refresh services"},on:{click:function(t){e.updateData()}}},[a("i",{staticClass:"fas fa-sync-alt"})])]}},{key:"actions",fn:function(t){return[a("button",{attrs:{title:"View on map"},on:{click:function(a){e.viewService(t.row)}}},[a("i",{staticClass:"fas fa-map"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.serviceInfo(),expression:"openEO.Capabilities.serviceInfo()"}],attrs:{title:"Details"},on:{click:function(a){e.serviceInfo(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-info"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.updateService(),expression:"openEO.Capabilities.updateService()"}],attrs:{title:"Edit"},on:{click:function(a){e.editService(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-edit"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.openEO.Capabilities.deleteService(),expression:"openEO.Capabilities.deleteService()"}],attrs:{title:"Delete"},on:{click:function(a){e.deleteService(t.row[t.col.id])}}},[a("i",{staticClass:"fas fa-trash"})])]}}])})},Dt=[];function It(e){a("Hbmy")}var $t=!1,Tt=It,Pt=null,kt=null,Mt=Object(p["a"])(yt,St,Dt,$t,Tt,Pt,kt),xt=Mt.exports,jt=a("kOsJ"),Vt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"SourceEnvironment"}},[a("div",{staticClass:"sourceHeader"},[a("h3",[e._v("Script: "),a("em",{attrs:{id:"scriptName"}},[e._v(e._s(e.scriptName))])]),a("div",{staticClass:"sourceToolbar"},[e.openEO.Capabilities.executeJob()?a("button",{staticClass:"executeScript",attrs:{title:"Run current script and view results"},on:{click:e.executeScript}},[a("i",{staticClass:"fas fa-play"})]):e._e(),a("button",{attrs:{title:"Clear current script / New script"},on:{click:e.newScript}},[a("i",{staticClass:"fas fa-file"})]),a("button",{attrs:{title:"Load script from local storage"},on:{click:e.loadScript}},[a("i",{staticClass:"fas fa-folder-open"})]),a("button",{attrs:{title:"Save script to local storage"},on:{click:e.saveScript}},[a("i",{staticClass:"fas fa-save"})]),a("button",{attrs:{title:"Download script"},on:{click:e.downloadScript}},[a("i",{staticClass:"fas fa-download"})])])]),a("div",{attrs:{id:"sourceCodeEditor"}})])},Ut=[];function Nt(e){a("i5Y/")}var At=!1,Lt=Nt,Ft="data-v-cffb4698",Jt=null,Bt=Object(p["a"])(jt["a"],Vt,Ut,At,Lt,Ft,Jt),zt=Bt.exports,Gt=a("mtWM"),Rt=a.n(Gt),Kt=a("p27E"),Wt={rampColors:{name:"Color ramp",callback:function(e,t){if(e[t.band]<t.valMin||e[t.band]>t.valMax)return[0,0,0,0];"string"===typeof t.clrMin&&(t.clrMin=t.clrMin.split(",")),"string"===typeof t.clrMax&&(t.clrMax=t.clrMax.split(","));var a=(e[t.band]-t.valMin)/(t.valMax-t.valMin);return t.clrMin.map(function(e,i){return a*t.clrMax[i]+(1-a)*e})},arguments:{band:{description:"The band to use",defaultValue:0},valMin:{description:"Minimum value of the band",defaultValue:0},valMax:{description:"Maximum value of the band",defaultValue:255},clrMin:{description:"Color for the minimum value",defaultValue:[240,220,150,255]},clrMax:{description:"Color for the maximum value",defaultValue:[10,70,230,255]}}},invertColors:{name:"Invert colors",callback:function(e,t){return e[0]=255-e[0],e[1]=255-e[1],e[2]=255-e[2],e[3]=e[3],e},arguments:{}}},qt=Wt;window.axios=Rt.a,Kt["OpenEO"].Visualizations=qt,Kt["OpenEO"].Capabilities=new Kt["Capabilities"],Kt["OpenEO"].SupportedOutputFormats={},Kt["OpenEO"].SupportedServices=[];var Ht={name:"openeo-web-editor",components:{AccountPanel:I,BackendPanel:N,DataViewer:ae,ImageViewer:Ee,FilePanel:de,JobPanel:Me,MapViewer:We,Modal:ht,ProcessGraphPanel:Ct,ServicePanel:xt,SourceEnvironment:zt},data:function(){return{openEO:Kt["OpenEO"]}},created:function(){r["a"].$on("changeServerUrl",this.changeServer),r["a"].$on("serverChanged",this.serverChanged)},mounted:function(){r["a"].$emit("changeServerUrl",this.$config.serverUrl),r["a"].$on("showInViewer",this.showInViewer),r["a"].$on("showMapViewer",this.showMapViewer),r["a"].$on("showImageViewer",this.showImageViewer),r["a"].$on("showDataViewer",this.showDataViewer)},methods:{changeServer:function(e){this.openEO.Capabilities=new Kt["Capabilities"],this.openEO.SupportedOutputFormats={},this.openEO.SupportedServices=[],this.openEO.API.baseUrl=e,this.openEO.Auth.userId=null,-1!==e.indexOf("/api")?this.openEO.API.driver="openeo-r-backend":this.openEO.API.driver="other",this.requestCapabilities()},serverChanged:function(){this.resetActiveTab("userContent")},requestCapabilities:function(){var e=this;this.openEO.API.getCapabilities().then(function(t){e.openEO.Capabilities=t,e.requestSupportedOutputFormats(),e.requestSupportedServices(),e.requestAuth()})},requestSupportedOutputFormats:function(){var e=this;this.openEO.Capabilities.outputFormatCapabilities()&&this.openEO.API.getOutputFormats().then(function(t){e.openEO.SupportedOutputFormats=t})},requestSupportedServices:function(){var e=this;this.openEO.Capabilities.serviceCapabilities()&&this.openEO.Services.getCapabilities().then(function(t){e.openEO.SupportedServices=t})},requestAuth:function(){var e=this,t=[];"openeo-r-backend"==this.openEO.API.driver&&(t=["test","test"]),2===t.length?this.openEO.Auth.login(t[0],t[1]).then(function(t){e.openEO.Auth.userId=t.user_id,r["a"].$emit("serverChanged")}).catch(function(e){r["a"].$emit("serverChanged")}):(this.openEO.Auth.userId="me",r["a"].$emit("serverChanged"))},resetActiveTab:function(e){var t=document.getElementById(e).getElementsByClassName("tabItem")[0];this.showTab(e,t.name)},setTabActive:function(e){e.className&&-1!==e.className.indexOf(" tabActive")||(e.className+=" tabActive")},changeUserTab:function(e){this.changeTab("userContent",e)},changeViewerTab:function(e){this.changeTab("viewer",e)},changeTab:function(e,t){this.showTab(e,t.currentTarget.name)},showTab:function(e,t){for(var a=document.getElementById(e),i=a.getElementsByClassName("tabContent"),s=0;s<i.length;s++)i[s].className=i[s].className.replace(" tabActive",""),i[s].id==t&&this.setTabActive(i[s]);var r=a.getElementsByClassName("tabItem");for(s=0;s<r.length;s++)r[s].className=r[s].className.replace(" tabActive",""),r[s].name==t&&this.setTabActive(r[s])},showMapViewer:function(){this.showTab("viewer","mapTab")},showImageViewer:function(){this.showTab("viewer","imageTab")},showDataViewer:function(){this.showTab("viewer","dataTab")},showInViewer:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!(e instanceof Blob))throw"No blob specified.";var s=e.type;switch(s&&-1!==s.indexOf("/")&&-1===s.indexOf("*")||(s=this.getMimeTypeForOutputFormat(i)),s.toLowerCase()){case"image/png":case"image/jpg":case"image/jpeg":case"image/gif":a&&this.$refs.imageViewer.setScript(a),this.$refs.imageViewer.showImageBlob(e);break;case"application/json":this.$refs.dataViewer.blobToText(e,function(e){var a=JSON.parse(e.target.result);Array.isArray(a)&&1==a.length&&"string"===typeof a[0]&&-1!==a[0].indexOf("://")?t.openEO.HTTP.download(a[0]).then(function(e){t.$refs.dataViewer.showBlob(e)}).catch(function(e){t.$utils.error(e)}):t.$refs.dataViewer.showJson(a)});break;case"text/plain":this.$refs.dataViewer.showBlob(e);break;case"image/tif":case"image/tiff":this.$refs.mapViewer.updateTiffLayerBlob(e);break;default:this.$utils.error(this,"Sorry, the returned content type is not supported to view.")}},getMimeTypeForOutputFormat:function(e){if(!e.format)return null;var t=e.format.toLowerCase();switch(t){case"png":case"jpeg":case"jpg":case"gif":return"image/"+t;case"tif":case"tiff":case"gtiff":return"image/tiff";case"json":return"application/json";default:return null}}}},Yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"ide"}},[a("BackendPanel",{attrs:{openEO:e.openEO}}),a("SourceEnvironment",{attrs:{openEO:e.openEO}}),a("div",{staticClass:"tabs",attrs:{id:"userContent"}},[a("div",{staticClass:"tabsHeader"},[a("button",{staticClass:"tabItem",attrs:{name:"jobsTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-tasks"}),e._v(" Jobs")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.createService(),expression:"this.openEO.Capabilities.createService()"}],staticClass:"tabItem",attrs:{name:"servicesTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-cloud"}),e._v(" Services")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userProcessGraphs(),expression:"this.openEO.Capabilities.userProcessGraphs()"}],staticClass:"tabItem",attrs:{name:"processGraphsTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-code-branch"}),e._v(" Process Graphs")]),a("button",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userFiles(),expression:"this.openEO.Capabilities.userFiles()"}],staticClass:"tabItem",attrs:{name:"filesTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-file"}),e._v(" Files")]),a("button",{staticClass:"tabItem",attrs:{name:"accountTab"},on:{click:e.changeUserTab}},[a("i",{staticClass:"fas fa-user"}),e._v(" Account")])]),a("div",{staticClass:"tabsBody"},[a("div",{staticClass:"tabContent",attrs:{id:"jobsTab"}},[a("JobPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.createService(),expression:"this.openEO.Capabilities.createService()"}],staticClass:"tabContent",attrs:{id:"servicesTab"}},[a("ServicePanel",{ref:"servicePanel",attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userProcessGraphs(),expression:"this.openEO.Capabilities.userProcessGraphs()"}],staticClass:"tabContent",attrs:{id:"processGraphsTab"}},[a("ProcessGraphPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:this.openEO.Capabilities.userFiles(),expression:"this.openEO.Capabilities.userFiles()"}],staticClass:"tabContent",attrs:{id:"filesTab"}},[a("FilePanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1),a("div",{staticClass:"tabContent",attrs:{id:"accountTab"}},[a("AccountPanel",{attrs:{userId:e.openEO.Auth.userId,openEO:e.openEO}})],1)])]),e._m(0)],1),a("div",{attrs:{id:"viewer"}},[a("div",{staticClass:"tabs"},[a("div",{staticClass:"tabsHeader"},[a("button",{staticClass:"tabItem tabActive",attrs:{name:"mapTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-map"}),e._v(" Map")]),a("button",{staticClass:"tabItem",attrs:{name:"imageTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-image"}),e._v(" Images")]),a("button",{staticClass:"tabItem",attrs:{name:"dataTab"},on:{click:e.changeViewerTab}},[a("i",{staticClass:"fas fa-database"}),e._v(" Data")])]),a("div",{staticClass:"tabsBody"},[a("div",{staticClass:"tabContent tabActive",attrs:{id:"mapTab"}},[a("MapViewer",{ref:"mapViewer"})],1),a("div",{staticClass:"tabContent",attrs:{id:"imageTab"}},[a("ImageViewer",{ref:"imageViewer"})],1),a("div",{staticClass:"tabContent",attrs:{id:"dataTab"}},[a("DataViewer",{ref:"dataViewer"})],1)])])]),a("vue-snotify"),a("Modal")],1)},Zt=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("footer",[i("a",{attrs:{href:"http://www.openeo.org",target:"_blank"}},[i("img",{attrs:{src:a("7Otq"),id:"openeoLogo"}})])])}];function Xt(e){a("Hw/t")}var Qt=!1,ea=Xt,ta=null,aa=null,ia=Object(p["a"])(Ht,Yt,Zt,Qt,ea,ta,aa),sa=ia.exports,ra=a("HgYs"),na=(a("6iet"),{error:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.error(t,a)},info:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.info(t,a)},ok:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.$snotify.success(t,a)},downloadData:function(){var e=document.createElement("a");return document.body.appendChild(e),e.style="display: none",function(t,a,i){var s;t instanceof Blob?s=t:(i||(i="application/octet-stream"),s=new Blob([t],{type:i})),a||(a="unnamed-file");var r=window.URL.createObjectURL(s);e.href=r,e.download=a,e.click(),window.URL.revokeObjectURL(r)}}(),isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},recolorImage:function(e,t){if(e.originalImage&&t.Visualization&&t.Visualization.function)try{for(var a=e.getContext("2d"),i=a.getImageData(0,0,e.width,e.height),s=0;s<i.data.length;s+=4){var r=e.originalImage.data.slice(s,s+4),n=t.Visualization.function(r,t.Visualization.args);i.data.set(n,s)}a.putImageData(i,0,0)}catch(e){console.log(e)}}});i["a"].use(ra["a"],{toast:{timeout:5e3}}),i["a"].prototype.$config=s,i["a"].prototype.$utils=na,i["a"].config.productionTip=!1,i["a"].config.errorHandler=function(e,t,a){na.error(t,e.message),console.log(e)},window.App=new i["a"]({render:function(e){return e(sa)}}).$mount("#app")},"R+pp":function(e,t){},RbLt:function(e,t,a){"use strict";var i=a("/5sW");t["a"]=new i["a"]},bbuP:function(e,t){},cq1b:function(e,t){},"i5Y/":function(e,t){},ioAF:function(e,t){},kOsJ:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_core_js_modules_es6_regexp_replace__=__webpack_require__("VjuZ"),__WEBPACK_IMPORTED_MODULE_0_core_js_modules_es6_regexp_replace___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_core_js_modules_es6_regexp_replace__),__WEBPACK_IMPORTED_MODULE_1__home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_typeof__=__webpack_require__("Oy1H"),__WEBPACK_IMPORTED_MODULE_1__home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_typeof___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_typeof__),__WEBPACK_IMPORTED_MODULE_2__eventbus_js__=__webpack_require__("RbLt"),__WEBPACK_IMPORTED_MODULE_3_codemirror_lib_codemirror_css__=__webpack_require__("4/hK"),__WEBPACK_IMPORTED_MODULE_3_codemirror_lib_codemirror_css___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_codemirror_lib_codemirror_css__),__WEBPACK_IMPORTED_MODULE_4_codemirror_mode_javascript_javascript_js__=__webpack_require__("5IAE"),__WEBPACK_IMPORTED_MODULE_4_codemirror_mode_javascript_javascript_js___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_codemirror_mode_javascript_javascript_js__),__WEBPACK_IMPORTED_MODULE_5_codemirror__=__webpack_require__("8U58"),__WEBPACK_IMPORTED_MODULE_5_codemirror___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_codemirror__);__webpack_exports__["a"]={name:"SourceEnvironment",props:["openEO"],data:function(){return{scriptName:"",editorOptions:{mode:"javascript",indentUnit:4,lineNumbers:!0},editor:null,defaultScript:this.$config.defaultScript}},mounted:function(){this.editor=__WEBPACK_IMPORTED_MODULE_5_codemirror___default()(document.getElementById("sourceCodeEditor"),this.editorOptions),this.editor.setValue(this.defaultScript),__WEBPACK_IMPORTED_MODULE_2__eventbus_js__["a"].$on("addToSource",this.insertToEditor),__WEBPACK_IMPORTED_MODULE_2__eventbus_js__["a"].$on("evalScript",this.evalScript)},methods:{evalScript:function evalScript(callback){var OpenEO=this.openEO;OpenEO.Editor={ProcessGraph:{},Visualization:{function:void 0,args:{}}};var script=this.editor.getSelection();if(script||(script=this.editor.getValue()),script&&eval(script),OpenEO.Editor.Visualization.args=OpenEO.Editor.Visualization.args||{},"object"===__WEBPACK_IMPORTED_MODULE_1__home_travis_build_Open_EO_openeo_web_editor_node_modules_babel_runtime_helpers_typeof___default()(OpenEO.Editor.Visualization.function)){var vis=OpenEO.Editor.Visualization.function;if(OpenEO.Editor.Visualization.function=vis.callback,"undefined"!==typeof vis.arguments)for(var key in vis.arguments)"undefined"===typeof OpenEO.Editor.Visualization.args[key]&&(OpenEO.Editor.Visualization.args[key]=vis.arguments[key].defaultValue)}callback(OpenEO.Editor)},clearEditor:function(){this.editor.setValue(""),this.scriptName=""},storageName:function(e){return"script."+e.replace(".","_")},executeScript:function(){var e=this,t=prompt("Please specify the file format:","");null!==t&&(this.$utils.info(this,"Data requested. Please wait..."),__WEBPACK_IMPORTED_MODULE_2__eventbus_js__["a"].$emit("evalScript",function(a){var i={format:t};a.ProcessGraph.execute(i).then(function(e){__WEBPACK_IMPORTED_MODULE_2__eventbus_js__["a"].$emit("showInViewer",e,a,i)}).catch(function(t){e.$utils.error(e,"Sorry, could not execute script.")})}))},newScript:function(){var e=confirm("Do you really want to clear the existing script to create a new one?");e&&this.clearEditor()},loadScript:function(){var e=prompt("Name of the script to load:");if(e){var t=localStorage.getItem(this.storageName(e));t?(this.editor.setValue(t),this.scriptName=e):this.$utils.info(this,'No script with the name "'+e+'" found.')}},saveScript:function(){var e=prompt("Name for the script:",this.scriptName);e&&(localStorage.setItem(this.storageName(e),this.editor.getValue()),this.scriptName=e)},downloadScript:function(){var e=this.scriptName;e||(e="openeo-script"),this.$utils.downloadData(this.editor.getValue(),e+".js","text/javascript")},insertToEditor:function(e){this.editor.replaceSelection(e)}}}},pVLf:function(e,t){},qWbh:function(e,t){}},[0]);
//# sourceMappingURL=app.5ff76e80.js.map